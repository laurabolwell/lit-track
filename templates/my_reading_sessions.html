{% extends "base.html" %}
{% block content %}

<h3 class="center-align">My Reading Sessions</h3>

<ul class="collapsible popout">

    {% for reading_session in reading_sessions %}
    {% for student in students %}
    {% if reading_session.student == student._id %}
    {% if student.teacher == username._id or student.parent == username._id %}

    <li>
        <div class="collapsible-header">
            <i class="fa-solid fa-caret-down"></i>
            <strong>
                {{ student.fname | capitalize }} {{ student.lname | capitalize }}
            </strong>
            <strong>{{ reading_session.date }}</strong>
            <!-- display home icon if logged by parent and school icon if logged by teacher -->
            {% if reading_session.logged_by == student.parent %}
            <i class="fa-solid fa-house"></i>
            {% elif reading_session.logged_by == student.teacher %}
            <i class="fa-solid fa-school"></i>
            {% endif %}

        </div>
        <div class="collapsible-body">
            Book: <strong>{{ reading_session.title | title }}</strong><br>
            Level: {{ reading_session.book_level }}<br>
            Comment: {{ reading_session.comment }}<br>
            {% if username._id == reading_session.logged_by %}
            <a href="{{ url_for('edit_reading_session', reading_session_id=reading_session._id )}}"
                class="btn-small">Edit</a>
            <a href="#modal-{{ reading_session._id }}" class="btn-small modal-trigger">Delete</a>
            <!-- inject the modals partials-template -->
            {% include "partials/modals.html" %}
            {% endif %}
        </div>
    </li>
    {% endif %}
    {% endif %}
    {% endfor %}
    {% endfor %}
</ul>

{% endblock %}